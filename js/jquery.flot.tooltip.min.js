/*
 * jquery.flot.tooltip
 * 
 * description: easy-to-use tooltips for Flot charts
 * version: 0.7.0
 * author: Krzysztof Urbas @krzysu [myviews.pl]
 * website: https://github.com/krzysu/flot.tooltip
 * 
 * build on 2013-08-19
 * released under MIT License, 2012
*/ 
!function(a){function b(b){function c(b,c){var d=b.getOptions();d.tooltip!==!1&&"undefined"!=typeof d.tooltip&&(a(b.getPlaceholder()).bind("plothover",g),a(c).bind("mousemove",e))}function d(b,c){a(b.getPlaceholder()).unbind("plothover",g),a(c).unbind("mousemove",e)}function e(a){var b={};b.x=a.pageX,b.y=a.pageY,f(b)}function f(c){var d=b.getOptions(),e=d.tooltipOpts,f=h(),g=a(f).outerWidth()+e.shifts.x,j=a(f).outerHeight()+e.shifts.y;c.x-a(window).scrollLeft()>a(window).innerWidth()-g&&(c.x-=g),c.y-a(window).scrollTop()>a(window).innerHeight()-j&&(c.y-=j),i.x=c.x,i.y=c.y}function g(c,d,e){function g(b,c){function d(a,b,c){var d,e=b.match(a);return null!==e&&""!==RegExp.$1&&(d=RegExp.$1,c=c.toFixed(d),b=b.replace(a,c)),b}function e(a,b){return"undefined"!=typeof b.series[a].options.mode&&"time"===b.series[a].options.mode}function f(){return"undefined"!=typeof k.xDateFormat&&null!==k.xDateFormat}function g(){return"undefined"!=typeof k.yDateFormat&&null!==k.yDateFormat}function h(b,c){var d=new Date(b);return a.plot.formatDate(d,c)}var i=/%p\.{0,1}(\d{0,})/,j=/%s/,l=/%x\.{0,1}(?:\d{0,})/,m=/%y\.{0,1}(?:\d{0,})/;return"function"==typeof b&&(b=b(c.series.label,c.series.data[c.dataIndex][0],c.series.data[c.dataIndex][1])),"undefined"!=typeof c.series.percent&&(b=d(i,b,c.series.percent)),"undefined"!=typeof c.series.label&&(b=b.replace(j,c.series.label)),e("xaxis",c)&&f(c)&&(b=b.replace(l,h(c.series.data[c.dataIndex][0],k.xDateFormat))),e("yaxis",c)&&g(c)&&(b=b.replace(m,h(c.series.data[c.dataIndex][1],k.yDateFormat))),"number"==typeof c.series.data[c.dataIndex][0]&&(b=d(l,b,c.series.data[c.dataIndex][0])),"number"==typeof c.series.data[c.dataIndex][1]&&(b=d(m,b,c.series.data[c.dataIndex][1])),"undefined"!=typeof c.series.xaxis.tickFormatter&&(b=b.replace(l,c.series.xaxis.tickFormatter(c.series.data[c.dataIndex][0],c.series.xaxis))),"undefined"!=typeof c.series.yaxis.tickFormatter&&(b=b.replace(m,c.series.yaxis.tickFormatter(c.series.data[c.dataIndex][1],c.series.yaxis))),b}var j=b.getOptions(),k=j.tooltipOpts,l=h();if(e){var m;m=g(k.content,e),l.html(m),f({x:d.pageX,y:d.pageY}),l.css({left:i.x+k.shifts.x,top:i.y+k.shifts.y}).show(),"function"==typeof k.onHover&&k.onHover(e,l)}else l.hide().html("")}function h(){var c;if(a("#flotTip").length>0)c=a("#flotTip");else{c=a("<div />").attr("id","flotTip"),c.appendTo("body").hide().css({position:"absolute"});var d=b.getOptions(),e=d.tooltipOpts;e.defaultTheme&&c.css({background:"#fff","z-index":"100",padding:"0.4em 0.6em","border-radius":"0.5em","font-size":"0.8em",border:"1px solid #111",display:"inline-block","white-space":"nowrap"})}return c}var i={x:0,y:0};b.hooks.bindEvents.push(c),b.hooks.shutdown.push(d)}var c={tooltip:!1,tooltipOpts:{content:"%s | X: %x | Y: %y",xDateFormat:null,yDateFormat:null,shifts:{x:10,y:20},defaultTheme:!0,onHover:function(){}}};a.plot.plugins.push({init:b,options:c,name:"tooltip",version:"0.6.2"})}(jQuery);